%start StateMachineMap::Idle
%class StateMachine
%header rm_fsm/StateMachine.h

%map StateMachineMap
%%

// Syntax:
//
// State {
//  TransitionEvent
//      [guard]
//      NextState
//      {Action}
// }

Idle
{
    dbusUpdate(data_dbus_: rm_msgs::DbusData)
        [ context.isAim(data_dbus_) == true ]
        Aim
        {
            initAim();
        }
    dbusUpdate(data_dbus_: rm_msgs::DbusData)
        [ context.isReady(data_dbus_) == true ]
        Ready
        {
            initReady(rm_msgs::DbusData data_dbus_);
        }
    dbusUpdate(data_dbus_: rm_msgs::DbusData)
        nil {}
}

Aim
    Entry {
            Aim();
    }
{
    dbusUpdate(data_dbus_: rm_msgs::DbusData)
        nil {}
}

Ready
    Entry {
            Ready();
    }
{
    dbusUpdate(data_dbus_: rm_msgs::DbusData)
        [ context.isAim(data_dbus_) == true ]
        Aim
        {
            initAim();
        }
    dbusUpdate(data_dbus_: rm_msgs::DbusData)
        [ context.isPush(data_dbus_) == true ]
        Push
        {
            initPush();
        }
    dbusUpdate(data_dbus_: rm_msgs::DbusData)
        [ context.isBack(data_dbus_) == true ]
        Back
        {
            initBack();
        }
    dbusUpdate(data_dbus_: rm_msgs::DbusData)
        nil {}
}

Push
    Entry {
            Push();
    }
{
    dbusUpdate(data_dbus_: rm_msgs::DbusData)
        [ context.isAim(data_dbus_) == true ]
        Aim
        {
            initAim();
        }
    dbusUpdate(data_dbus_: rm_msgs::DbusData)
        [ context.isReady(data_dbus_) == true ]
        Ready
        {
            initReady(rm_msgs::DbusData data_dbus_);
        }
    dbusUpdate(data_dbus_: rm_msgs::DbusData)
        nil {}
}

Back
    Entry {
            Back();
    }
{
    dbusUpdate(data_dbus_: rm_msgs::DbusData)
        [ context.isAim(data_dbus_) == true ]
        Aim
        {
            initAim();
        }
    dbusUpdate(data_dbus_: rm_msgs::DbusData)
        [ context.isPush(data_dbus_) == true ]
        Push
        {
            initPush();
        }
    dbusUpdate(data_dbus_: rm_msgs::DbusData)
        nil {}
}

Default
{
}

%%